# 1. 项目背景与目标
- **项目缘起**：各省公路局、高速公路公司负责辖区公路、桥梁等基础设施的建设与养护，需要对工程师、养护工人及下包施工队开展持续的安全与技术培训。当前培训主要依赖线下或分散的线上工具，学习进度、考试结果和资质管理难以统一追踪。
- **市场机会**：数字化监管和资质管理已成为交通基础设施行业的刚性需求，政府及国企单位正推动线上培训合规化、标准化；缺乏针对公路养护场景的垂直 SaaS 解决方案。
- **业务价值**：帮助甲方集中管理自有及管养单位团队的培训资源、学习进度和考试结果，提升合规率与运营效率，降低培训与审核成本。
- **整体目标**：构建一套覆盖课程学习、考试认证、证书管理的在线学习平台，为甲方提供可量化的学习效果数据与监管工具。
- **成功指标**：
  - 平台覆盖甲方所有内部工程师与合作施工单位人员，并支持按项目、管养单位、岗位角色维度统计。
  - 学习完成率、考试通过率、证书到期提醒等关键指标可视化并可导出。
  - 平台满足甲方在安全、合规和审计留痕方面的要求，通过内部验收与试点单位上线。

# 2. 用户与用例
- **角色概览**
  - **平台超级管理员（SaaS 运营方）**：负责平台整体运营配置，包括租户管理、资源配额、全局配置、版本发布与客服支持。
  - **主管单位管理员（甲方公路局）**：负责主管单位下属组织架构、课程计划、考试安排、统计报表及资质复核；可管理本单位与下属管养单位的学员与账号。
  - **乙方管养单位管理员**：负责所属管养单位的学员账号、班级分组、课程报名、考试安排及日常督学；接受主管单位的计划与考核。
  - **工程师学员（甲方/乙方）**：涵盖道路、桥梁、隧道、安全等岗位角色；按照岗位要求参与在线学习、模拟练习、正式考试，并获取上岗资质或职称升级。

- **角色用例清单**
  - **平台超级管理员（SaaS 运营方）**
    - 开通与配置新租户
    - 维护租户信息、资源配额与开通功能
    - 管理平台级参数、模板、题库与资源库
    - 发布版本、配置更新及紧急补丁
    - 处理平台级客服工单和故障预警
    - 监控平台运营数据、生成运营报表
  - **主管单位管理员（甲方公路局）**
    - 维护组织架构、管养单位及项目分组
    - 配置岗位体系、能力模型与课程计划
    - 管理课程、考试、题库、培训资料
    - 发布培训与考试计划，分配到岗位/单位
    - 审核学员报名、考试资格
    - 监控学习进度、考试结果并发出督办通知
    - 配置考试成绩自动复核规则、证书自动签发/停用策略
    - 导出学习、证书、人员统计报表
    - 维护本单位管理员与学员账号权限
  - **乙方管养单位管理员**
    - 接收主管单位下发的培训与考试计划
    - 维护本单位组织、班组与岗位人员信息
    - 批量导入学员，分配岗位与学习任务
    - 安排日常学习提醒、线下培训与考试组织
    - 监控学员任务完成情况并提交督办反馈
    - 管理考试现场/远程监考、处理异常
    - 汇总上报学习、考试、证书领取情况
  - **工程师学员（甲方/乙方）**
    - 激活账号、完善个人资料与岗位信息
    - 查看学习任务、加入课程计划
    - 在线学习课程、完成课后练习与测验
    - 参加模拟考试、预约正式考试并完成答卷
    - 查询成绩、错题解析与补考安排
    - 下载/查看电子证书，关注有效期提醒
    - 在移动端完成学习、签到线下培训活动
    - 提交学习反馈、建议或问题

# 3. 流程与业务规则
- **核心流程概览（管理员 ↔ 学员闭环）**
  1. 管理员创建培训计划并配置课程、考核规则、适用人员范围。
  2. 管理员导入或分配学员、发布计划并推送任务通知。
  3. 学员接收通知、按计划学习课程并完成测验/作业/考试。
  4. 系统记录学习与考核数据，触发补考或复训流程（若未达标）。
  5. 成绩达标后自动（或经配置复核）生成证书，管理员和学员均可查看。
  6. 管理员持续监控数据、执行督办、调整计划或规则。

- **管理员端核心流程**
  - **计划创建与配置**
    - 支持按年度/专项创建培训计划，可对计划分版本管理。
    - 课程类型覆盖视频、文档、直播回放、测验、作业、考试等，可设置必修/选修标记与学习顺序（顺序/自由）。
    - 计划规则包括：开始/结束时间、最晚完课日期、考核标准（学时、测验分数、考试合格线）、补考次数及间隔、证书自动签发条件。
    - 可配置不同岗位/单位的差异化要求（如选修课包、学时/分值权重）。
  - **资源与人员管理**
    - 批量上传课程资源并关联元数据（专业类别、适用岗位、难度等级）。
    - 支持批量导入学员信息（Excel/接口），校验岗位与所属单位；可按组织、岗位、班组进行分组。
    - 学员分配支持自动匹配到计划，也可手动添加/剔除，记录变更日志。
  - **计划发布与通知**
    - 发布时可选择立即生效或预约生效，系统同步通知到主管单位/管养单位管理员及相关学员。
    - 通知渠道：站内消息、短信、邮件、APP 推送（可配置），支持提醒频次与时间窗口。
  - **学习与考核监控**
    - 实时查看计划执行进度（按单位/岗位/个人），识别未完成、滞后学员。
    - 支持一键下发督办通知给管养单位或个人，督办记录形成闭环。
    - 考试结束后，系统按照预设规则自动复核成绩；异常成绩或监考异常进入人工复核队列。
  - **证书与合规管理**
    - 根据配置自动签发证书（满足学时+成绩+监考合规），或触发人工审批。
    - 支持证书有效期管理、到期提醒、停用策略（如岗位调离、违规被暂停）。
  - **数据反馈与优化**
    - 管理员可生成学习、考试、证书报表，监控 KPI（完成率、平均分、通过率等）。
    - 支持对计划进行中途调整（新增课程/修改截止时间），系统记录版本变化并通知相关人员。

- **学员端核心流程**
  - **任务接收与入口**
    - 学员通过站内消息/短信/APP 接收培训通知，点击进入计划详情。
    - 计划首页显示：必修/选修课程列表、学习顺序、截止时间、考核标准、完成状态。
  - **学习执行**
    - 课程学习提供进度条、章节标记、学习时间记录；支持断点续播、倍速、观看限制（如必须完整观看）。
    - 学习过程中可弹出测验/调查，系统即时判分并反馈。
    - 对于选修课程，学员可根据个人发展需求选择修读，系统记录学时。
  - **考核参与**
    - 学员按计划进入测验、作业、考试环节；考试前需确认考场/设备要求。
    - 若考试未通过，系统依据规则自动生成补考任务，提示补考时间与剩余次数。
    - 作业可支持文件上传、图片上传等形式，管理员批阅后反馈。
  - **学习结果与证书**
    - 学员可在个人中心查看每个计划的得分、完成率、证书状态。
    - 满足条件后自动生成电子证书，可下载或申请纸质版。
    - 系统提醒证书到期时间，提供复训计划快捷入口。
  - **互动与支持**
    - 支持学习反馈、问题提报、讨论区互动；遇到资源或考试问题可提交工单。

- **关键业务规则**
  - **学员资料审核机制**
    - 学员首次登录后必须完成个人资料、专业履历、资格证书等资料并提交审核。
    - 乙方管养单位管理员进行初审，可打回补充或提交主管单位复审；主管单位复审通过后学员状态变为"已认证"。
    - 仅"已认证"学员可领取学习任务、进入课程与考试；未审核或审核不通过的学员处于锁定状态。
    - 审核过程需记录审核意见、时间戳及附件，系统自动通知学员进度。
  - **必修/选修逻辑**
    - 必修课程需全部完成并达到考核标准；选修课程可设置学分/学时要求，允许替换或补选。
  - **时间与提醒机制**
    - 学习截止时间前自动多次提醒（提前 X 天、当天、逾期），管理员可配置频次与渠道。
    - 计划截止后，仍未达标的学员进入"补训/补考池"，需管理员重新安排。
  - **补考与补训**
    - 默认提供 2 次补考机会，可配置冷却时间（如 7 天后可再次参加）。
    - 补考未通过可触发线下复训或延长学习期，系统记录原因。
  - **成绩复核与证书签发**
    - 自动复核规则可包含：考试成绩 >= 合格线、监考无违规、必修课程完成、学习时长满足要求。
    - 证书签发后可自动同步至主管单位档案；停用证书需记录原因并通知学员与管养单位。
  - **数据留痕与审计**
    - 所有流程节点需存档（计划版本、通知记录、学习日志、监考录像、证书签发记录）。
    - 支持导出标准化审计报告，用于监管检查。
  - **异常处理**
    - 考试作弊、登录异常、学习时长异常需触发预警并通知管理员。
    - 学员请假、病假等特殊情况可由管理员修改计划参与状态并保留证据。

- **管理员端计划案例（流程活动 + 角色标注）**
  - **业务背景**：主管单位管理员计划为"2025 年桥梁维护安全专项培训"安排一批课程，并配置考试和证书自动发放。
  - **流程步骤（活动 + 角色）**：
    1. 梳理培训目标与覆盖范围（主管单位管理员）
    2. 遴选并上传课程资源，设置课程上架状态（主管单位管理员）
    3. 校验课程内容并入库，生成资源版本（平台系统）
    4. 创建培训计划草稿，配置时间、课程必修/选修、考试规则（主管单位管理员）
    5. 校验计划关联的课程状态、参数合法性（平台系统）
    6. 批量导入学员并按岗位/单位分组，生成任务清单（主管单位管理员）
    7. 校验学员账号有效性，生成任务列表（平台系统）
    8. 提交计划审批，完成电子签审（主管单位管理员 + 审批人）
    9. 记录审批流程、更新计划状态（平台系统）
    10. 配置发布策略与通知渠道，发布计划（主管单位管理员）
    11. 推送学习通知、生成计划首页（平台系统）
    12. 补全个人资料与职业资质并提交审核（学员）
    13. 资料初审与复审，审核通过后开放学习权限（乙方管养单位管理员 → 主管单位管理员 → 平台系统）
    14. 接收计划通知，查看任务与要求（学员）
    15. 按序学习课程、完成练习与考试（学员）
    16. 实时更新学习进度、考试结果、异常监测（平台系统）
    17. 查看进度看板，发送督办提醒，审批请假申请（主管单位管理员）
    18. 安排考试、配置监考，系统判分并复核（主管单位管理员 + 平台系统）
    19. 自动签发证书或进入人工复核（平台系统 + 主管单位管理员）
    20. 学员下载证书、关注有效期提醒（学员）
    21. 导出报表、复盘计划效果（主管单位管理员）
    22. 归档计划、课程、考试和证书数据（平台系统）

- **状态机定义（管理员核心对象）**
  - **课程（Course）状态机**
    - 状态：`草稿` → `待审核` → `上架` → `下架` → `归档`
    - 事件：
      - 创建课程：进入 `草稿`
      - 提交审核（可选）：进入 `待审核`
      - 审核通过或管理员直接上架：进入 `上架`
      - 上架课程可因内容更新、过期、违规而 `下架`
      - 下架后可重新编辑再上架，或标记为 `归档`（不可再使用，保留历史记录）
    - 约束：仅 `上架` 状态的课程可被计划关联；`下架` 课程若已被计划引用需提示影响范围。
  - **培训计划（Training Plan）状态机**
    - 状态：`草稿` → `待审批`（可选） → `待发布` → `执行中` → `已结束` → `归档`
    - 事件：
      - 创建计划：进入 `草稿`
      - 提交审批：进入 `待审批`
      - 审批通过自动转 `待发布`；若无需审批可直接设置为 `待发布`
      - 发布生效时进入 `执行中`，期间可更新课程、人员（需留痕）
      - 达到截止日期或管理员手动结项：进入 `已结束`
      - 结项后整理资料进入 `归档`，锁定数据，仅支持查询
    - 约束：计划关联的课程必须为 `上架` 状态；执行中修改需通知相关人员并记录版本；已结束的计划不可重新执行，需复制为新计划。
  - **考试（Exam Session）状态机**
    - 状态：`草稿` → `待发布` → `报名中`（可选） → `待开考` → `进行中` → `判分中` → `已完成` → `归档`
    - 事件：
      - 创建场次：`草稿`
      - 发布后：`待发布` → 到达报名期：`报名中`
      - 报名结束、等待开考：`待开考`
      - 开考时自动进入 `进行中`
      - 考试结束进入 `判分中`（含监考审核、异常复核）
      - 判分完成、结果确认后进入 `已完成`
      - 结束后归档，保留监考录像、答卷留痕
    - 约束：考试关联的培训计划需 `执行中`；判分中发现异常可回退到 `待开考` 或 `进行中`（补考）。
  - **证书（Certificate）状态机**
    - 状态：`待签发` → `已签发` → `生效` → `即将到期` → `已过期` → `停用`
    - 事件：
      - 达成签发条件时生成 `待签发`
      - 自动/人工签发后为 `已签发`，经主管审批后 `生效`
      - 到期前 X 天进入 `即将到期` 并触发提醒
      - 超过有效期自动转 `已过期`
      - 若违规或岗位变更，证书可被手动 `停用`
    - 约束：停用或过期需通知学员及单位；可关联复训计划触发重新学习。

- **状态流转案例**
  - **案例步骤**：
    1. 管理由课程模板创建《桥梁安全操作实训》，编辑完成提交审核，审核通过后课程状态从 `草稿` → `待审核` → `上架`。
    2. 管理员创建培训计划"桥梁维护安全专项"，计划状态从 `草稿` → `待审批`（领导审批通过）→ `待发布`。
    3. 发布生效后计划进入 `执行中`，自动为 280 名学员生成学习任务。
    4. 管理员创建考试"桥梁安全在线考试"，场次状态 `草稿` → `待发布` → `待开考`，开考当天自动转 `进行中`。
    5. 考试结束后进入 `判分中`，系统完成判卷并复核后进入 `已完成`。
    6. 满足签发条件的学员自动生成证书：证书状态 `待签发` → `已签发` → `生效`，并进入证书列表；到期前 30 天自动标记为 `即将到期`，发送提醒。
    7. 若某学员违规操作，管理员将其证书手动设为 `停用`，同时计划内标记需补训。

# 4. 数据实体
- **租户（Tenant）**
  - 关键字段：租户ID、单位名称、行业类型、联系人、合同信息、套餐版本、启用状态、有效期。
  - 关联关系：一个租户包含多个组织节点、管理员账号、课程资源、培训计划。
  - 生命周期：创建（售前/运营）→ 启用 → 运营中 → 到期/续费 → 停用/归档。
- **组织/单位（Organization）**
  - 关键字段：组织ID、名称、类型（主管单位/管养单位/项目部）、上级组织、地理位置、状态。
  - 关联：隶属某租户，可包含子组织与账号；与培训计划、任务统计关联。
- **岗位/角色模型（RoleProfile）**
  - 字段：岗位ID、名称、所属专业、能力等级、适用课程标签、必修/选修要求。
  - 关联：与学员、培训计划、课程匹配；用于自动匹配任务。
- **账号/用户（User）**
  - 字段：用户ID、姓名、身份证/工号、联系方式、所属组织、岗位、账号状态、登录记录。
  - 关联：一个用户可拥有多个角色（管理员/学员）；与学习记录、考试记录、证书关联。
- **课程资源（Course）**
  - 字段：课程ID、名称、类型（视频/文档/直播/测验等）、时长、学时、版本号、状态（草稿/上架）、标签、适用岗位。
  - 关联：与培训计划、课件文件、测验题目、评价反馈相关联。
  - 生命周期：创建草稿 → 审核 → 上架 → 下架/更新 → 归档。
- **课件/资源文件（Asset）**
  - 字段：资源ID、文件类型、存储位置、大小、时长、版权信息、可用状态。
  - 关联：属于某课程版本，引用于学习记录。
- **培训计划（TrainingPlan）**
  - 字段：计划ID、名称、批次、类型（年度/专项）、时间范围、必修/选修课程列表、考核规则、状态。
  - 关联：绑定课程、考试、学员集合；与通知、报表、证书关联。
  - 生命周期：草稿 → 审批 → 待发布 → 执行中 → 已结束 → 归档。
- **学习任务（LearningAssignment）**
  - 字段：任务ID、所属计划、学员ID、课程ID、任务类型（必修/选修）、完成状态、进度、打开次数、最后学习时间。
  - 关联：指向学员和课程，是数据统计的基础。
- **学习记录（LearningRecord）**
  - 字段：记录ID、任务ID、学员ID、课程/课件ID、学习时长、学习进度、测验得分、互动行为（弹题、笔记）。
  - 关联：与监控、合规检查、补训判定相关。
- **考试（Exam）**
  - 字段：考试ID、名称、类型（线上/线下/混合）、总分、合格线、补考次数、监考要求、状态。
  - 关联：关联培训计划、题库、报名信息、监考记录。
- **考试场次/报名（ExamSession/Registration）**
  - 字段：场次ID、考试ID、开考时间、结束时间、监考形式、场地；报名记录含报名ID、学员ID、状态（报名/出勤/缺考）、成绩、异常标记。
  - 关联：与学员、监考、成绩复核、补考计划相关。
- **题库/试卷（QuestionBank/Paper）**
  - 字段：题库ID、题目类型、难度、知识点标签；试卷ID、抽题规则、总题数、评分方式。
  - 关联：供考试/测验引用；与成绩统计、错题分析关联。
- **作业/实操任务（AssignmentTask）**
  - 字段：任务ID、描述、提交形式（文本/附件/图片/视频）、评分标准、批阅状态。
  - 关联：与培训计划、学员提交、批阅记录相关。
- **成绩记录（ScoreRecord）**
  - 字段：记录ID、学员ID、考试/作业ID、成绩、合格标记、复核状态、复核人。
  - 关联：与补考、证书签发逻辑关联。
- **补考计划（RetakePlan）**
  - 字段：计划ID、关联考试、适用学员范围、冷却时间、剩余次数、状态。
  - 关联：系统自动生成或管理员安排，与考试场次关联。
- **证书（Certificate）**
  - 字段：证书ID、名称、适用计划/课程、签发日期、有效期、状态（待签发/生效/即将到期/过期/停用）、签发方式、签发人。
  - 关联：与学员、培训计划、考试成绩关联。
- **通知与消息（Notification）**
  - 字段：通知ID、类型（计划发布/催办/补考提醒等）、发送渠道、发送对象、发送时间、送达状态、阅读状态。
  - 关联：与培训计划、学员、管理员操作记录关联。
- **审批记录（ApprovalLog）**
  - 字段：审批ID、对象类型（计划/证书/请假）、审批节点、审批人、意见、时间、结果。
  - 关联：与培训计划、学员特殊申请、证书发放有关。
- **监考与异常记录（ProctoringLog/ExceptionReport）**
  - 字段：记录ID、考试场次、监考方式、监考结果、异常类型（作弊/缺考/设备问题）、处理状态。
  - 关联：与考试成绩复核、证书签发、补考触发相关。
- **操作日志（AuditLog）**
  - 字段：日志ID、操作者、操作对象、操作类型、时间、IP/设备、变更详情。
  - 用途：满足审计、追踪所有关键业务操作。
- **统计报表（ReportSnapshot）**
  - 字段：报表ID、报表类型、生成时间、维度（时间/单位/岗位）、指标数据、导出记录。
  - 关联：供管理员下载、比对历史数据。
- **系统配置（ConfigSetting）**
  - 字段：配置ID、配置类型（通知、补考、签发规则等）、适用范围（租户/计划）、当前值、版本。
  - 关联：影响自动化规则执行。

# 5. 功能清单
- **平台超级管理员（SaaS 运营方）模块**
  - 租户管理：创建/启用/停用租户，配置套餐与资源配额（高优）。
  - 租户单位与域名配置：设置登录页样式（租户单位 logo）、域名绑定、单点登录参数（中优）。
  - 平台参数配置：全局通知模板、补考默认规则、证书模板管理（中优）。
  - 资源库与题库全局管理：审核公共资源、维护通用题库、标签体系（中优）。
  - 版本发布与更新：灰度/全量发布管理、回滚控制、运行监控（高优）。
  - 平台运营监控：全局在线人数、资源占用、关键指标仪表盘（中优）。
  - 客服工单与支持：接收、分派、处理租户工单，课程库维护（中优）。

- **主管单位管理员（甲方）模块**
  - 组织架构与人员管理：维护主管单位、管养单位、项目组，批量导入人员，账号激活（高优）。
  - 岗位体系与能力模型：配置岗位分类、能力要求、岗位-课程映射（中优）。
  - 课程资源管理：上传/编辑课程、版本管理、上下架、标签维护、评价管理（高优）。
  - 培训计划管理：
    - 创建/编辑/复制计划，配置必修/选修课程、时间、考核标准（高优）。
    - 计划审批流程设置与执行记录（中优）。
    - 计划发布、预约生效、通知渠道配置（高优）。
  - 学员任务分配与资料审核：按岗位/组织匹配学员、审核个人资料与证书、控制学习权限、手动调整、差异化配置（高优）。
  - 学习过程监控：计划进度看板、学时统计、低完成率提醒（高优）。
  - 考试管理：创建考试、场次安排、监考配置、考试复核、补考安排（高优）。
  - 证书管理：证书模板设置、自动签发策略配置、证书列表查询、停用操作（高优）。
  - 报表与统计：学习报表、考试报表、证书报表、导出功能（高优）。
  - 系统配置：补考规则、提醒频次、数据留痕策略、自定义字段（中优）。
  - 权限与安全：多管理员角色配置、操作日志查看、IP/设备控制（中优）。

- **乙方管养单位管理员模块**
  - 组织与班组管理：维护本单位层级、班组、岗位信息（高优）。
  - 学员账号管理与资料初审：批量导入、激活、岗位分配、资料初审、状态管理；初审通过后提交主管单位复审（高优）。
  - 学习计划接收与执行：查看上级计划、确认执行、分派班组、设置提醒（高优）。
  - 学习进度跟踪：监控学员完成情况、发送内部提醒、记录执行情况（高优）。
  - 考试组织与监考：安排考场、监考记录、异常上报（中优）。
  - 学员反馈收集：汇总学习反馈、问题上报、与主管单位交互（低优）。
  - 报表查看：查看本单位学习完成率、考试通过率、证书领取进度（中优）。

- **工程师学员模块**
  - 账号激活与资料完善：首次登录、设置密码、填写个人信息、填写专业履历、上传职业资格证书等附件（高优）。
  - 学习任务中心：查看任务列表、进度条、截止时间、必修/选修区分；审核通过前任务锁定显示"待资料审核"（高优）。
  - 课程学习：在线视频、文档阅读、章节测验、进度记录、学习评价（高优）。
  - 考核参与：模拟考试、正式考试、作业提交、成绩查看、补考入口（高优）。
  - 证书中心：查看已获证书、下载、关注有效期提醒（中优）。
  - 通知与提醒：接收计划发布、催办、补考、证书到期等通知；站内信、短信、邮件、APP 推送（高优）。
  - 互动与反馈：提交学习问题、反馈、讨论区互动（低优）。
  - 移动端支持：移动端/小程序学习、线下培训签到、离线缓存（中优）。
  - 资料审核状态与补充：查看审核进度、接收打回通知、补充资料、与上级沟通，审核通过后自动解锁学习权限（中优）。

- **通用支撑功能**
  - 认证与安全：单点登录、双因素认证、密码策略、操作日志、安全审计（高优）。
  - 文件与媒体服务：大文件上传、转码、加密存储、访问权限控制（高优）。
  - 消息通知服务：多渠道发送、模板管理、队列重试、统计分析（高优）。
  - 日志与监控：操作日志、系统日志、性能监控、告警配置（中优）。
  - 数据导入导出：Excel 模板导入、批量校验、导出报表（高优）。
  - API/集成：对接外部证书系统、政府监管平台、内部 HR 系统（中优）。

# 6. 各功能模块需求
> 页面编码规则：`[角色缩写]-[功能模块序号]-[页面序号]`，角色缩写为 `PA`（平台超级管理员）、`GA`（主管单位管理员）、`MA`（乙方管养单位管理员）、`ST`（工程师学员）。新增页面按序号递增，如需调整层级可在模块序号间插入新编号。
>
> **页面优先级总览（P1=首批、高优；P2=次高；P3=补充）**
>
> | 角色 | 页面编码 | 页面名称 | 优先级 | 当前状态 |
> | --- | --- | --- | --- | --- |
> | PA | PA-01-01 | 租户列表 | P2 | 已实现（前端租户列表页面） |
> | PA | PA-01-02 | 租户详情 | P2 | 已实现（前端租户详情页面） |
> | PA | PA-01-03 | 新建租户向导 | P3 | 已实现（前端租户开通向导） |
> | PA | PA-02-01 | 公共课程库 | P3 | 已实现（前端公共课程库页面） |
> | PA | PA-02-02 | 公共题库 | P3 | 已实现（前端公共题库页面） |
> | PA | PA-02-03 | 标签管理 | P3 | 已实现（前端标签管理页面） |
> | PA | PA-02-04 | 试卷管理（考试模板） | P3 | 已实现（前端试卷管理页面） |
> | PA | PA-03-01 | 版本发布 | P2 | 已实现（前端版本发布页面） |
> | PA | PA-03-02 | 运行监控 | P2 | 已实现（前端运行监控页面） |
> | PA | PA-03-03 | 工单中心 | P2 | 未实现 |
> | PA | PA-04-01 | 平台运营仪表盘 | P2 | 已实现（前端平台仪表盘页面） |
> | GA | GA-01-01 | 主管单位仪表盘 | P1 | 已实现（前端主管单位仪表盘） |
> | GA | GA-02-01 | 课程中心 | P1 | 已实现（前端课程中心页面） |
> | GA | GA-02-02 | 课程编辑 | P2 | 未实现 |
> | GA | GA-03-01 | 培训计划列表 | P1 | 已实现（前端演示版） |
> | GA | GA-03-02 | 培训计划编辑向导 | P2 | 已实现（前端培训计划编辑向导页面） |
> | GA | GA-03-03 | 培训计划详情 | P2 | 已实现（前端培训计划详情页面） |
> | GA | GA-03-04 | 考试列表 | P1 | 已实现（前端考试列表页面） |
> | GA | GA-03-05 | 证书管理 | P1 | 已实现（前端演示版） |
> | GA | GA-04-01 | 管养单位列表 | P2 | 已实现（前端管养单位列表页面） |
> | GA | GA-04-02 | 管养单位管理员 | P2 | 未实现 |
> | GA | GA-04-03 | 资料审核工作台 | P2 | 已实现（前端资料审核工作台页面） |
> | GA | GA-05-01 | 学习进度看板 | P2 | 未实现 |
> | GA | GA-05-02 | 异常预警 | P2 | 未实现 |
> | GA | GA-05-03 | 督办记录 | P3 | 未实现 |

- **平台超级管理员（SaaS 运营方）后台**
  - **租户中心**
    - 页面：
      - `PA-01-01 租户列表`（已实现：前端租户列表页面）。
      - `PA-01-02 租户详情`（已实现：前端租户详情页面）。
      - `PA-01-03 新建租户向导`（已实现：前端租户开通向导）。
    - 功能与规则：
      - 租户列表支持按名称、行业、套餐、状态、创建时间、活跃度等维度筛选；可查看合同信息、配额使用、管理员、近期活跃情况，支持分页、导出、常用视图保存。
      - 行级操作包含查看详情、启用/停用、进入租户后台（SSO）、发送续费提醒、导出租户资料；批量操作支持启停、续费提醒、导出清单，重要操作需二次确认并写入操作日志。
      - 租户详情展示合同与付费信息、套餐与配额、品牌样式、域名与登录配置、管理员账户、运行指标、操作历史；支持调整套餐与配额、上传品牌/登录页素材、配置域名与单点登录、重置管理员密码、查看运维记录。
      - 新建租户以向导方式分为基础信息→套餐设置→品牌与域名→管理员→确认开通；每步提供字段校验、草稿保存、返回编辑功能，提交后生成租户档案并触发通知（邮件/站内信）。
  - **平台资源与题库**
    - 页面：
      - `PA-02-01 公共课程库`（已实现：前端公共课程库页面）。
      - `PA-02-02 公共题库`（已实现：前端公共题库页面）。
      - `PA-02-03 标签管理`（已实现：前端标签管理页面）。
      - `PA-02-04 试卷管理（考试模板）`（已实现：前端试卷管理页面）。
    - 功能与规则：
      - 公共课程库：多维筛选（状态、类型、来源、岗位、标签、授权状态），课程详情抽屉展示简介、课件列表、授权租户、审核记录、版本历史；支持新建课程、批量上线/下线、授权、导出；新建课程流程含基础信息、资源上传、标签设置、提交审核。
      - 公共题库：按题型、难度、知识点、来源、审核状态筛选；题目预览展示题干、选项、答案、解析、引用考试；支持批量审核、异常标记、批量导出（可隐藏答案）；"新建题目"弹窗支持题型切换、选项设置、正确答案、难度、知识点、解析、适用岗位。
      - 标签管理：维护跨模块标签体系，支持分类、适用模块/岗位、状态、维护人筛选；可新建、编辑、停用标签，查看引用次数与关联资源；操作记录写入审计日志。
      - 试卷管理：基于公共题库构建可复用考试模板；支持筛选（状态、来源、适用岗位、关联计划/课程）、模板预览（题目组成、关联课程/计划、操作记录）、新建模板（基础信息、题库选题、关联计划、题序与随机策略、草稿/提交审核）。
  - **版本与运维中心**
    - 页面：
      - `PA-03-01 版本发布`（已实现：前端版本发布页面）。
      - `PA-03-02 运行监控`（已实现：前端运行监控页面）。
      - `PA-03-03 工单中心`（未实现）。
    - 功能与规则：
      - 版本发布：维护版本计划列表（状态、风险等级、负责人、计划窗口、灰度进度）；版本详情展示变更清单、灰度批次、关联问题、通知记录、操作日志；"新建版本"配置基础信息、风险评估、计划窗口、适用范围、变更重点；支持推进阶段、回滚、发布公告等操作并记录日志。
      - 运行监控：展示服务健康卡片、告警列表（按严重程度/服务筛选，含负责人、触发时间、处理状态）、资源容量使用率、事故记录（起止时间、影响、根因、处理状态）；提供导出、跳转到版本发布/工单中心入口。
      - 工单中心（规划中）：集中接收租户问题与自动告警生成的工单，支持分类、优先级、受理人、SLA 跟踪、操作日志、统计分析，并与运行监控、通知中心联动。
  - **运营数据总览**
    - 页面：`PA-04-01 平台运营仪表盘`（已实现：前端平台仪表盘页面）。
    - 功能与规则：展示租户运营概览（活跃度、学习人次、健康标签）、课程与题库使用趋势、热门资源榜单、培训计划与考试快照、系统运行健康提示、快捷操作入口、平台公告通知；支持切换时间维度、筛选租户类型、导出关键图表。

- **主管单位管理员（甲方）端**
  - **首页驾驶舱**
    - 页面：`GA-01-01 主管单位仪表盘`（已实现：前端主管单位仪表盘）。
    - 功能与规则：展示重点培训计划执行情况、下属管养单位活跃度与风险标签、待处理事项（资料审核、计划审批、考试安排、证书停用）、今日动态事件流；提供跳转至课程中心、计划管理、管养单位管理、学习监控等快捷入口。
  - **课程中心**
    - 页面：`GA-02-01 课程中心`（已实现：前端课程中心页面）、`GA-02-02 课程编辑`（未实现）。
    - 功能与规则：公共课程库按类型、状态、来源、标签筛选，查看课程简介、适用岗位、标签、来源、状态，并支持一键加入课程池；课程池维护自建与引用课程的状态（草稿/待审核/已发布/已归档）、适用岗位、标签、更新时间，支持导出、批量提交审核或撤回；自建课程可草稿保存、提交平台审核，审核通过前不可发布，对外不可见，通过后上线课程池并默认仅当前主管单位使用，可申请推广至公共库；记录审核意见与历史版本；复用平台课程库的筛选、导出、标签多选、详情抽屉等交互。
  - **培训计划与考试**
    - 页面：`GA-03-01 培训计划列表`（已实现：前端演示版）、`GA-03-02 培训计划编辑向导`（已实现：前端培训计划编辑向导页面）、`GA-03-03 培训计划详情`（已实现：前端培训计划详情页面）、`GA-03-04 考试列表`（已实现：前端考试列表页面）、`GA-03-05 证书管理`（已实现：前端演示版）。
    - 功能与规则：
      - 培训计划列表：多维筛选（状态：草稿/待审批/审批中/进行中/已完成/已归档；计划周期：自定义时间范围；计划类型：岗前培训/晋升培训/年度复训等；覆盖岗位/职称；适用管养单位；创建人）；列表字段包括计划名称（含编码）、执行周期、覆盖岗位数量、覆盖单位数量、覆盖学员数、当前状态、完课率、关联考试数量、关联证书策略、最近更新时间、负责人；操作包括查看详情、复制计划、新建计划、催办（向相关单位/负责人发送提醒）、导出计划清单；草稿计划支持删除或继续编辑；支持批量催办、批量导出、保存筛选视图。
      - 培训计划编辑向导：采用 5 步独立页面向导（基础信息、课程与学习要求、覆盖范围与学员、考核与证书、通知与审批），逐步配置计划名称/编码/周期/负责人、课程选择与必修/选修规则、管养单位与岗位覆盖策略、考试补考与证书签发、通知渠道与审批流程；支持保存草稿、校验必填项、在最后一步展示配置摘要，并在提交审批后跳转回列表。
      - 培训计划详情：顶部汇总计划名称/编号、状态、执行周期、负责人、完成率与阶段提醒；提供计划简介、目标与附件下载；课程区域列出课程来源、类型、课时、适用岗位、必修/选修、完成规则；覆盖范围包含管养单位执行情况（负责人、进度、状态、滞后提醒）与岗位覆盖统计；考试配置展示关联考试类型、时间、状态、监考安排；证书策略呈现模板、签发方式、签发规则、有效期；审批流程以时间线展示节点、审批人、意见；通知与督办记录列出已发送通知及催办反馈。支持后续扩展导出计划、编辑计划、再次催办等操作入口。
      - 考试与证书管理：考试列表支持按状态、来源、关键字筛选，展示考试名称、来源（公共库/自建）、关联计划、适用岗位、排期、时长、通过线、状态等，并可执行查看、复制、编辑；支持从公共考试库批量引入考试模板后生成主管单位版本，也支持从 0 开始新建考试并配置模板、时长、通过标准、关联计划；证书管理采用"模板管理 / 发放记录"标签页，模板页支持新建/复制/编辑证书模板、配置发证策略、审批流程、有效期与续期规则、停用归档等操作，支持按状态、策略、有效期筛选；发放记录页可按学员、单位、证书状态、发证方式筛选，查看发证详情、执行续期或撤销，并支持手动发证申请；输出计划执行、考试通过、证书发放等报表。
  - **管养单位管理**
    - 页面：`GA-04-01 管养单位列表`（已实现：前端管养单位列表页面）、`GA-04-02 管养单位管理员`、`GA-04-03 资料审核工作台`（已实现：前端资料审核工作台页面）。
    - 功能与规则：维护下属管养单位档案，查看单位活跃度、计划执行情况、管理员信息；配置或重置管养单位管理员账号与权限；统一审核工程师/学员资料与资质（支持批量初审、复审、驳回、留言沟通），记录审核意见与历史档案，确保符合准入要求。
  - **学习监控**
    - 页面：`GA-05-01 学习进度看板`、`GA-05-02 异常预警`、`GA-05-03 督办记录`（均未实现）。
    - 功能与规则：实时掌握学习执行情况，按单位/岗位/个人查看完成率、学时、考试达标情况；识别异常（未开始、进度滞后、考试待安排、证书即将过期），支持发送提醒、生成督办单；督办记录保留责任人、操作历史、整改结果，可导出报表供管理层复盘。

- **乙方管养单位管理员端**
  - **单位首页**
    - 页面：`MA-01-01 单位仪表盘`（已实现：前端演示版仪表盘页面）。
    - 功能：展示本单位计划执行情况、学习预警、考试安排。
  - **组织与学员管理**
    - 页面：`MA-02-01 单位组织管理`、`MA-02-02 学员列表`、`MA-02-03 批量导入工具`、`MA-02-04 资料初审工作台`。
    - 功能：维护班组、岗位，导入学员、激活账号、查看资料提交状态、执行初审/打回/提交复审、调整岗位。
  - **计划执行**
    - 页面：`MA-03-01 接收计划列表`（已实现：前端演示版计划卡片页面）、`MA-03-02 计划执行详情`。
    - 功能：查看上级发布计划、确认执行、分派班组、维护内部提醒计划。
  - **学习跟踪**
    - 页面：`MA-04-01 学员进度列表`、`MA-04-02 异常提醒`。
    - 功能：查看学员完成情况、发送提醒短信/站内信、记录备注。
  - **考试与监考**
    - 页面：`MA-05-01 考试安排`（已实现：前端演示版考试表格页面）、`MA-05-02 监考记录`、`MA-05-03 异常上报表单`。
    - 功能：安排线下/线上监考、记录出勤、上报异常情况。
  - **反馈与问题上报**
    - 页面：`MA-06-01 问题反馈列表`、`MA-06-02 提报表单`。
    - 功能：上报课程/平台问题、查看处理进度。
  - **单位报表**
    - 页面：`MA-07-01 单位统计报表`。
    - 功能：导出本单位学习、考试、证书数据。

- **工程师学员端（Web/移动）**
  - **学习首页**
    - 页面：`ST-01-01 任务总览`（必修/选修区分、进度条、截止时间提醒、资料审核状态提示）（已实现：前端演示版仪表盘页面）。
    - 功能：查看待办任务、了解审核状态、审核通过后快捷进入课程、领取补考任务、查看通知。
  - **课程学习**
    - 页面：`ST-02-01 课程详情`（课节列表、进度、学习时长）、`ST-02-02 课件播放器`、`ST-02-03 章节测验/讨论`。
    - 功能：视频播放、文档阅读、测验答题、记笔记、发表评论。
  - **考试中心**
    - 页面：`ST-03-01 考试列表`、`ST-03-02 考试说明`、`ST-03-03 考试作答界面`、`ST-03-04 错题本`。
    - 功能：预约考试、参加模拟/正式考试、查看成绩、错题复盘、补考入口。
  - **证书中心**
    - 页面：`ST-04-01 证书列表`（已实现：前端演示版证书卡片页面）、`ST-04-02 证书详情`。
    - 功能：下载电子证书、查看有效期、接收到期提醒。
  - **通知中心**
    - 页面：`ST-05-01 消息列表`（已实现：前端演示版通知流页面）、`ST-05-02 通知详情`。
    - 功能：查看系统通知、学习催办、考前提醒、证书提醒；标记已读。
  - **个人中心**
    - 页面：`ST-06-01 个人资料`（基本信息、专业信息、从事专业简历、职业资格证书上传、附件管理）、`ST-06-02 账号安全`、`ST-06-03 学习档案`。
    - 功能：完善个人资料、上传/更新履历与证书附件、查看资料审核状态与历史记录、管理密码、查看历史学习记录、导出学习证明。
  - **资料审核流程支持**
    - 页面：`ST-07-01 资料提交状态`、`ST-07-02 审核结果详情`、`ST-07-03 补充资料入口`。
    - 功能：提交资料后查看审批进度、接收审核结果通知、审核通过前申请修改、按审核意见补充资料、与上级管理员进行留言沟通，了解何时正式可学习。
  - **移动端特性**
    - 页面：`ST-08-01 移动学习首页`、`ST-08-02 线下签到`。
    - 功能：移动端学习、推送提醒、线下培训扫码签到、断网缓存。

- **通用支撑模块**
  - **认证与权限服务**
    - 功能：租户隔离的账号体系、单点登录、双因素认证、权限模型、Session 管理。
  - **文件与媒体服务**
    - 功能：课件上传、转码、加密存储、CDN 分发、水印、播放控制。
  - **通知消息服务**
    - 功能：多渠道发送（站内信/短信/邮件/APP）、模板管理、批量发送、重试机制、发送统计。
  - **数据导入导出中心**
    - 功能：Excel 模板下载、批量校验、导入结果日志、导出计划、定时导出。
  - **报表与分析引擎**
    - 功能：多维度统计、预计算、图表组件、数据缓存、API 输出。
  - **日志与审计**
    - 功能：操作日志、系统日志、审计查询、导出、告警设置。
  - **配置中心**
    - 功能：补考规则、提醒频率、证书签发策略、系统字典、国际化配置。

# 7. 非功能需求
- **性能与容量**
  - 支持单租户同时在线学员 ≥ 1,000 人，整个平台峰值并发 ≥ 50,000 在线用户，课程播放延迟 < 3 秒。
  - 视频课程需提供自适应码率，保证在 2 Mbps 网络下流畅播放；测验/考试提交响应时间 ≤ 1 秒。
  - 支持课件、作业等大文件上传（单文件 ≤ 2 GB），上传过程具备断点续传与超时重试机制。
- **可用性与可靠性**
  - 平台核心学习、考试服务全年可用性 ≥ 99.9%；计划维护窗口需提前 48 小时通知。
  - 关键操作（考试开考、证书签发）需具备冗余与回退方案；服务异常时提供降级提示与备用渠道。
  - 数据每日全量备份、关键数据实时增量备份；备份保留周期 ≥ 180 天，可在 4 小时内完成恢复演练。
- **安全与合规**
  - 符合国家网络安全等保三级、数据安全法、个人信息保护法要求；存取日志保留 ≥ 180 天。
  - 支持租户隔离、细粒度角色权限控制、重要操作二次确认与审计追踪。
  - 资料、证书、考试等敏感数据静态加密，传输采用 HTTPS/TLS1.2+；视频资源支持防盗链、水印。
  - 登录支持密码策略、短信/邮箱双重验证、单点登录（SAML/OIDC）；异常登陆尝试触发预警。
- **兼容性与终端支持**
  - Web 端兼容 Chrome、Edge、Safari 最新两个大版本，分辨率适配 1280px 以上；移动端提供 H5 + 小程序。
  - 考试模块需支持 PC 与移动端，提供考试安全控件或浏览器锁定模式，可检测切屏/外设。
- **可扩展性与可维护性**
  - 架构支持按租户、业务模块横向扩展，课程/考试/证书等模块可独立部署与升级。
  - 标准化 API 设计，支持与第三方证书系统、政务监管平台、内部 HR 系统集成；接口提供版本管理。
  - 配置中心可动态调整补考规则、提醒频率、证书模板，无需重启服务。
  - 代码与配置调整具备灰度发布能力，支持快速回滚。
- **可观测性与运维**
  - 提供系统监控（CPU、内存、调用延迟）、业务监控（学习完成率、考试通过率）、异常告警（短信/邮件/IM）。
  - 关键行为留痕：计划变更、课程上下架、考试成绩复核、证书签发等记录可导出审计报告。
  - 日志按租户与业务模块分类存储，支持检索与追踪；敏感日志脱敏处理。
- **可用性体验**
  - 课程学习、考试流程需提供清晰引导和异常提示，确保审核未通过时明确告知原因与补充路径。
  - 支持夜间模式、字体放大、字幕开关等无障碍设置；移动端消息推送可自定义时间段。
  - 全面支持中文（简体）界面，租户可自定义部分文案前缀或品牌元素。
- **法规与审计要求**
  - 提供证书签发、培训计划执行的电子签章、时间戳服务，满足政府审计需求。
  - 考试监控录像、学习日志至少保存 24 个月，可按监管要求导出。
- **灾备与弹性**
  - 核心服务部署在双机房/多可用区，切换时间 ≤ 10 分钟；定期进行灾备演练（至少每季度一次）。
  - 峰值期间可按需扩容，服务恢复后自动回收资源，避免长期空置。

# 8. 交互规范
- **整体信息架构**
  - 采用角色定制化仪表盘：不同角色（平台、主管单位、管养单位、学员）登录后直接进入对应首页，突出关键指标与待办。
  - 左侧主导航 + 顶部辅助导航结构，主导航按照业务流程分组（概览、课程、计划、考试、证书、报表、系统）；子页面使用面包屑提示层级。
  - 支持收藏常用页面、最近访问记录，方便管理员快速返回高频功能。

- **视觉风格与品牌一致性**
  - 基础配色方案：主色沿用主管单位品牌色（可配置），辅色用于提醒；状态色保持标准（成功#34C759、警告#FF9500、错误#FF3B30）。
  - 使用统一的字体与字号体系（PC 端主字号 14px、标题 16-20px），行间距至少 1.5 倍，保证可读性。
  - 图标采用线性风格，搭配文字说明；重要操作按钮使用实心主色，次要操作使用线框或中性色。
  - 多数界面提供浅色与夜间模式切换，确保夜间学习场景护眼。

- **布局与响应式**
  - PC 端布局宽度 1280px 自适应，关键模块采用栅格系统（24 栅格）；移动端采用单列布局，重要指标置顶。
  - 表格类页面支持固定表头、列宽调整、列显示配置，并在移动端转换为卡片样式。
  - 页面需考虑长列表性能，提供分页、批量操作、导出功能，避免滚动加载带来的定位困难。

- **导航与交互反馈**
  - 所有操作需有明确反馈：提交成功/失败展示 Toast 或模块内提示；长耗时操作（导入、生成报表）使用进度条或状态节点。
  - 关键操作前弹出确认框，说明影响范围（如停用证书、发布计划、终止考试）；提供撤销或回滚选项。
  - 通知中心内未读消息有显著红点提示；站内信、短信、邮件的触达状态在界面上可追溯。
  - 支持快捷键操作（如回车提交表单、Esc 关闭弹窗），提升高频用户效率。

- **数据录入与表单规范**
  - 表单字段按业务流程分组展示；使用步骤条引导租户创建、计划编辑等多步骤操作。
  - 所有必填项前以星号标识，提供实时校验、错误提示与字段示例；复杂字段（如岗位选择）支持搜索与多选。
  - 证书、履历等附件上传支持拖拽、进度展示、多文件管理；对格式、大小限制有清晰提示。
  - 表单支持草稿保存、快速复制；批量导入提供模板下载、错误行定位与再次导入机制。

- **信息展示与可视化**
  - 仪表盘指标采用卡片 + 图表形式，卡片支持点击跳转对应列表；图表支持筛选、时间范围切换。
  - 列表页默认显示关键字段，其他字段通过"自定义列"配置；支持多选批量操作、快捷筛选、关键字搜索。
  - 进度状态采用颜色与文案双重提示（例：绿色"已完成"，橙色"进行中"，红色"待补考"）；重要节点提供时间线视图。
  - 审核流程展示流程图或步骤条，明确当前节点、处理人、历史意见。

- **学习与考试体验**
  - 课程播放器提供目录、进度、字幕、笔记、问答等功能；支持倍速、画中画、后台播放。
  - 学习任务页面使用卡片呈现必修/选修分类、截止时间、进度条；未通过审核的任务显示锁定状态及提示。
  - 考试界面采用倒计时、题号卡片、答题进度提示；支持标记未答、快捷定位错题；交卷前二次确认。
  - 如果出现网络波动，考试与测验具有自动保存与恢复机制；考试异常（切屏、断网）立即反馈给监考端。

- **可达性与容错**
  - 表格、按钮、输入框需具备足够的点击区域（≥ 44px）；支持键盘导航与焦点可视化。
  - 系统在错误提示中提供解决建议与帮助链接；出现权限限制时指明申请路径。
  - 页面加载失败提供重试按钮与客服联系方式，减少用户迷失。
  - 为避免误操作，对批量处理、导入等操作提供预览和模拟执行。

- **通知与提醒策略**
  - 所有提醒支持多渠道选择与静默时间设置；学员通知按任务类型自动分类（课程、考试、证书、审核）。
  - 重要提醒需具备"稍后提醒""忽略"选项，避免打断；历史通知可按类型过滤。
  - 审核结果、补考安排、证书即将到期等关键提醒需同时发送给相关管理员与学员。

- **文案与术语统一**
  - 文案以简短、易懂、行业友好的措辞为主；避免内部术语，必要时附带解释。
  - 状态文案统一使用"待审核""已通过""已驳回"等标准词汇；错误提示遵循"问题+原因+解决方案"格式。
  - 所有时间统一为 24 小时制格式，例如"2025-04-15 14:30"，并支持根据租户设置展示本地节假日提醒。

- **帮助与培训支持**
  - 页面右上角提供"帮助中心"入口，内含操作指南、视频教学、常见问题。
  - 关键操作旁嵌入引导提示或新手引导浮层；版本更新后首次登录显示新功能提示。
  - 支持在线客服或工单入口，用户可随时反馈问题并跟进处理状态。

# 9. 需求变更记录
> 记录每次需求调整的时间、内容、原因与影响范围，保持可追溯性。

